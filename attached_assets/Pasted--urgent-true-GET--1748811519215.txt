გამჭოლი მესიჯების გასაგზავნად ბრძანებას დაურთეთ urgent=true

მესიჯის გასაგზავნად გამოიყენეთ GET ან POST ბრძანება.
GET ბრძანების მაგალითი:
https://smsoffice.ge/api/v2/send/?key=[API_KEY]&destination=[CUSTOMER_MOBILE]&sender=smsoffice&content=TestMessage[TIME]&urgent=true

POST გამოყენების დროს, send სიტყვის ბოლოს აუცილებელად დაწერეთ დახრილი ხაზი შემდეგნაირად: send/

პასუხად დაგიბრუნდებათ JSON ობიექტი შემდეგი შემადგენლობით: 
{ 
     "Success":boolean, 
     "Message":string, 
     "Output":object, 
     "ErrorCode":integer 
}

მონაცემების დასაშიფრად შეგიძლიათ გამოიყენოთ HTTPS.

HTTP GET ბრძანების მაქსიმალური სიგრძე 4096 ბაიტია. თუ სიგრძე აჭარბებს მაქსიმალურს, გამოიყენეთ HTTP POST.
POST მეთოდის გამოყენებისას Content-Type უნდა იყოს application/x-www-form-urlencoded


მაგალითები
ბრაუზერიდან	http://smsoffice.ge/api/v2/send?key=[API_KEY]&destination=[CUSTOMER_MOBILE]&sender=smsoffice&content=TestMessage
PHP	$data = 'key=' . urlencode('[API_KEY]') . '&destination=' . urlencode('[CUSTOMER_MOBILE]') . '&sender=' . urlencode($sender). '&content=' . urlencode($text) 
$url= "http://smsoffice.ge/api/v2/send?".$data
$response = file_get_contents($url);
cURL	function get_data($url) 
{ 
     $ch = curl_init(); 
     $timeout = 5; 
     curl_setopt($ch, CURLOPT_URL, $url); 
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
     curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout); 
     $data = curl_exec($ch); 
     curl_close($ch); 
     return $data; 
} 

$data = curl_escape($ch, 'key=[API_KEY]&destination={$mobile}&sender={$sender}&content={$text}'); 
$returned_content = get_data('http://smsoffice.ge/api/v2/send?{$data }');
 

სავალდებულო პარამეტრები

ჩამოთვლილი პარამეტრები სავალდებულოა მესიჯის გაგზავნისას: 

key	საიდუმლო გასაღები API -ს გამოსაყენებლად. გასაღების ნახვა შეგიძლიათ პროფილის გვერდზე
destination	მძიმით გამოყოფილი მობილური ნომრები. 
ნომრების რაოდენობა შეუზღუდავია. ნომერი უნდა იყოს საერთაშორისო ფორმატში, 00 და + გარეშე. მაგალითად: 995577123456,995599123456
sender	
სათაური. მაქსიმუს 11 სიმბოლოიანი სიტყვა. მაგალითად, SMSOFFICE ან მაქსიმუმ 16 ციფრი. მაგალითად, +995577123456

წინაპირობა: აუცილებელია რომ სათაური იყოს რეგისტრირებელი. წინააღმდეგ შემთხვევაში მესიჯი ადრესატს არ მიუვა.

content	ტექსტი. დასაშვებია ნებისმიერი Unicode სიმბოლო. მაქსიმუმ 1000 სიმბოლო
 

არასავალდებულო პარამეტრები

ჩამოთვლილი პარამეტრები არასავალდებულოა მესიჯის გაგზავნისას: 

contentType	მესიჯის სახეობა. დასაშვები მნიშვნელობები:
1: ტექსტური მესიჯი
2: Flash მესიჯი
reference	მესიჯის უნიკალური იარლიყი. იარლიყი დაგიბრუნდებათ მიღების უწყისთან ერთად. რამოდენიმე ნომრის შემთხვევაში, ყველა შეტყობინებას ექნება იგივე იარლიყი.
იარლიყის მაქსიმალური სიგრძეა 20 სიმბოლო UTF-8 ფორმატით. თუ გსურთ მიღების უწყისის მიღება, ამ პარამეტრის მითითება აუცილებელია
showServiceTime	თუ showServiceTime=true, პასუხად დაგიბრუნდებათ მესიჯის დამუშავების დრო მილიწამებში
urgent	
თუ urgent=true, მესიჯი მივა იმ შემთხვევაშიც კი, თუ მიმღებ ნომერს დაბლოკილი აქვს მესიჯების მიღება

წინაპირობა: აუცილებელია რომ სათაური ჩანდეს ჩამონათვალში და იყოს აქტიური

scheduledAt	
შესაძლებელია მესიჯის გაგზავნა მითითებულ დროს (თარიღი მიუთითეთ Unix ფორმატში წამების სიზუსტით)

 

პასუხები გაგზავნისას

მესიჯის გაგზავნისას, API -ს პასუხები შეიძლება იყოს შემდეგი სახის:

პასუხი	განმარტება
0	მესიჯი მიღებულია smsoffice -ს მიერ სამომავლოდ ნომერთან გადასაგზავნად. ეს ჯერ არ ნიშნავს, რომ მესიჯი მივიდა მობილურ ტელეფონში. მესიჯის მისვლას შეიტყობთ მიღების უწყისში
10	destination შეიცავს არაქართულ ნომრებს
20	ბალანსი არასაკმარისია
40	გასაგზავნი ტექსტი 160 სიმბოლოზე მეტია
60	ბრძანებას აკლია content პარამეტრის მნიშვნელობა, გასაგზავნი ტექსტი
70	ბრძანებას აკლია ნომრები
75	ყველა ნომერი სტოპ სიაშია
76	ყველა ნომერი არასწორი ფორმატითაა მოწოდებული
77	ყველა ნომერი სტოპ სიაშია ან არასწორი ფორმატითაა მოწოდებული
80	key -ს შესაბამისი მომხმარებელი ვერ მოიძებნა
110	sender პარამეტრის მნიშვნელობა გაუგებარია
120	გააქტიურეთ api -ის გამოყენების უფლება პროფილის გვერდზე
150	sender არ იძებნება სისტემაში. შეამოწმეთ მართლწერა
500	ბრძანებას აკლია key პარამეტრი
600	ბრძანებას აკლია destination პარამეტრი
700	ბრძანებას აკლია sender პარამეტრი
800	ბრძანებას აკლია content პარამეტრი
-100	დროებითი შეფერხება

მესიჯის სტატუსის დადგენა
გაგზავნილი მესიჯის ყოველ ახალ მდგომარეობას გამოგიგზავნით წინასწარ შეთანხმებულ ვებ მისამართზე. 
თუ მესიჯი გააგზავნეთ ერთდროულად რამოდენიმე ნომერთან, თითოეული ნომრისათვის მოგივათ ცალკე უწყისი.

უწყისები გამოგზავნილი იქნება მისამართიდან 91.239.206.90. უწყისის მიღებისას, თქვენი სისტემის პასუხი უნდა იყოს OK
ვებ მისამართის მაგალითი: http://www.yoururl.com/callback

უწყისის პარამეტრები:

reference	იარლიყი, რომელიც მითითებული იყო გაგზავნისას
status	სტატუსი. სტატუსის მნიშვნელობა შეიძლება იყოს ერთერთი ჩამოთვლილაგან:  Delivered, Undelivered, Expired, Pending, Unknown
reason	თუ სტატუსის მნიშვნელობა განსხვავებულია Delivered -ისგან, მითითებული იქნება მიზეზი
destination	აბონენტის ნომერი საერთაშორისო ფორმატში 00 და + გარეშე
timestamp	აბონენტის ტელეფონში მესიჯის მისვლის დრო. ფორმატი yyyyMMddhhmmss
თუ მისვლის დრო ჩვენთვის უცნობია, შესაძლებელია იყოს ცარიელი
operator	მობილური ნომერის მფლობელი ოპერატორის საერთაშორისო კოდი
თუ ოპერატორის კოდი ჩვენთვის უცნობია, შესაძლებელია იყოს ცარიელი
მაგალითი:

http://www.yoururl.com/callback?reference=12345678&status=delivered&reason=&destination=995577123456&timestamp=20130501120202&operator=28202

ბალანსის გაგება
ბალანსის გასაგებად, გამოიძახეთ ფუნქცია http://smsoffice.ge/api/getBalance?key={api-key}
ფუნქცია დაგიბრუნებთ დარჩენილი მესიჯების რაოდენობას

პარამეტრები

key	საიდუმლო გასაღები API -ს გამოსაყენებლად. გასაღები ნახეთ პროფილის გვერდზე